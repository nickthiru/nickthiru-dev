@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    scroll-behavior: smooth;
    color-scheme: light dark;
  }

  /* Light theme (default) */
  html[data-theme="light"] {
    color-scheme: light;
  }

  /* Dark theme */
  html[data-theme="dark"] {
    color-scheme: dark;
  }

  body {
    @apply font-sans text-body font-normal bg-background text-primary;
  }

  /* Dark mode color overrides */
  html[data-theme="dark"] body {
    @apply bg-[#1A1A2E] text-[#E5E5E5];
  }

  h1 {
    @apply text-h1;
  }

  h2 {
    @apply text-h2;
  }

  h3 {
    @apply text-h3;
  }

  h4 {
    @apply text-h4;
  }

  a {
    @apply transition-colors duration-200;
  }

  ::selection {
    @apply bg-accent/20;
  }
}

@layer components {
  .skip-link {
    @apply absolute -top-full left-4 z-50 bg-accent text-white px-4 py-2 rounded-md focus:top-4 transition-all;
  }

  .btn-primary {
    @apply inline-flex items-center gap-2 bg-accent text-white px-5 py-2.5 rounded-md font-medium
           hover:bg-accent-hover hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2
           transition-all duration-200
           dark:bg-accent dark:hover:bg-accent-hover dark:ring-offset-[#1A1A2E];
  }

  .btn-secondary {
    @apply inline-flex items-center gap-2 border border-accent text-accent px-5 py-2.5 rounded-md font-medium
           hover:bg-accent/10 focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2
           transition-all duration-200
           dark:border-accent dark:text-accent dark:hover:bg-accent/20 dark:ring-offset-[#1A1A2E];
  }

  .post-card {
    @apply bg-surface border border-border rounded-lg p-6
           hover:-translate-y-0.5 hover:shadow-md transition-[transform,box-shadow] duration-300 ease-out
           dark:bg-[#16213E] dark:border-[#262626];
  }

  .track-badge {
    @apply inline-block text-xs font-semibold px-3 py-1 rounded-full;
  }

  .track-badge-technical {
    @apply bg-blue-lighter text-blue-darker;
  }

  .track-badge-business {
    @apply bg-pink-lighter text-pink-darker;
  }

  .track-badge-product {
    @apply bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-100;
  }

  .tag {
    @apply text-small text-muted dark:text-[#737373];
  }

  .nav-link {
    @apply text-primary hover:text-accent transition-colors font-medium
           dark:text-[#FAFAFA] dark:hover:text-accent;
  }

  .nav-link-active {
    @apply text-accent dark:text-accent;
  }

  .filter-pill {
    @apply px-4 py-1.5 rounded-full text-small font-medium transition-colors
           dark:bg-[#16213E] dark:border-[#262626];
  }

  .filter-pill-active {
    @apply bg-accent text-white dark:bg-accent dark:text-white;
  }

  .filter-pill-inactive {
    @apply bg-surface border border-border text-secondary hover:border-accent hover:text-accent
           dark:bg-[#16213E] dark:border-[#262626] dark:text-[#A3A3A3] dark:hover:border-accent dark:hover:text-accent;
  }
}

/* Shiki dual theme support */
.shiki,
.shiki span {
  color: var(--shiki-light, inherit);
  background-color: var(--shiki-light-bg, transparent);
}

.dark .shiki,
.dark .shiki span {
  color: var(--shiki-dark, inherit);
  background-color: var(--shiki-dark-bg, transparent);
}

/* Code block styling */
pre {
  @apply overflow-x-auto rounded-lg p-4 font-mono;
}

pre code {
  @apply bg-transparent p-0;
}

/* Prose adjustments */
.prose pre {
  @apply bg-code;
}

.prose code {
  @apply font-mono text-primary;
}

.prose pre:not(.shiki) {
  @apply text-primary;
}

/* Loading dots animation */
.loading-dots::after {
  content: "";
  animation: loading-dots 1.5s steps(4, end) infinite;
}

@keyframes loading-dots {
  0%,
  20% {
    content: "";
  }
  40% {
    content: ".";
  }
  60% {
    content: "..";
  }
  80%,
  100% {
    content: "...";
  }
}
